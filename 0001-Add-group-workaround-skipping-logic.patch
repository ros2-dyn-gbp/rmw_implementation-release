From 49796e8cb0dc0ef806944dd1933ebdda121accdb Mon Sep 17 00:00:00 2001
From: Scott K Logan <logans@cottsay.net>
Date: Wed, 3 Apr 2024 13:55:15 -0500
Subject: [PATCH] Add group workaround skipping logic

---
 package.xml | 14 +++++---------
 1 file changed, 5 insertions(+), 9 deletions(-)

diff --git a/package.xml b/package.xml
index db29b4572736..37227f3b5ca1 100644
--- a/package.xml
+++ b/package.xml
@@ -21,15 +21,11 @@
   <depend>rcpputils</depend>
   <depend>rcutils</depend>
   <build_depend>rmw</build_depend>
-  <!--
-  Bloom does not support group_depend so entries below duplicate the group rmw_implementation_packages.
-  This ensures that binary packages have support for all of these rmw impl. enabled.
-  -->
-  <build_depend>rmw_connextdds</build_depend>
-  <build_depend>rmw_cyclonedds_cpp</build_depend>
-  <build_depend>rmw_fastrtps_cpp</build_depend>
-  <build_depend>rmw_fastrtps_dynamic_cpp</build_depend>
-  <!-- end of group dependencies added for bloom -->
+
+  <build_depend condition="$DISABLE_GROUP_WORKAROUND != 1">rmw_connextdds</build_depend>
+  <build_depend condition="$DISABLE_GROUP_WORKAROUND != 1">rmw_cyclonedds_cpp</build_depend>
+  <build_depend condition="$DISABLE_GROUP_WORKAROUND != 1">rmw_fastrtps_cpp</build_depend>
+  <build_depend condition="$DISABLE_GROUP_WORKAROUND != 1">rmw_fastrtps_dynamic_cpp</build_depend>
 
   <depend>rmw_implementation_cmake</depend>
 
-- 
2.44.0

